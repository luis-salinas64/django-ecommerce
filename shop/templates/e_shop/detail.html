{% extends "e_shop/base.html" %}

{% block title %}Detalle de producto{% endblock %}

{% block content %}
{% load static %}
<div class="articulo-grid">
    
    <!-- Contenedor de fotos secundarias -->
    <div class="pictures">

        <img src="{{ articulo.picture_1.url }}" alt="Not Found" height="180px">
        
        <img src="{{ articulo.picture_2.url }}" alt="Not Found" height="180px">
        
        <img src="{{ articulo.picture_3.url }}" alt="Not Found" height="180px">
        
    </div>

    <!-- Contenedor de foto principal del artículo -->
    <div class="articulo-item">
        <div class="pictures">

        <img src="{{ articulo.picture.url }}" alt="Not Found" with="350px" height="500px">

        </div>
    </div>

    <div class="articulo-item">
    
        <br/>
        
        <h1>{{articulo.nombre}}</h1>

        <div class="precio-item">
            Precio: $ {{articulo.precio}}
        <div>
        
        

        <div>
            <h5>Color: {{articulo.color_id}}</h5>
        </div>

        

        <h5>Elegi tu talle:</h5>

        <!-- Formulario para elegir talle y comprar la prenda -->
        <form name="comprar" method="POST" action="{% url 'check_button' %}">{%csrf_token%}
            <!-- Select para elegir el talle -->
            <select name = "talle" id="talle">

                {% for nombre_talle, stock in talle.items %}
                    <!-- Si el stock de un talle es 0, se va a deshabilitar la opcion -->
                    {% if stock == 0 %}
                        <!-- Deshabilito la opción con valor xs, porque es 0 -->
                        <option value = {{ nombre_talle }} disabled> {{ nombre_talle }} </option>
                    
                    {% else %}
                        <!-- Agrego la opción con valor xs -->
                        <option value = {{ nombre_talle }}> {{ nombre_talle }} </option>
                    {% endif %}    
                
                {% endfor %}

            </select>

            <!-- Estos son todos los valores del usuario, en hidden -->
            <input type="hidden" name="username" value="{{user.username}}">
            <input type="hidden" name="art_id" value="{{articulo.art_id}}">
            <input type="hidden" name="nombre" value="{{articulo.nombre}}">
            <input type="hidden" name="precio" value="{{articulo.precio}}">
            <input type="hidden" name="color_id" value="{{articulo.color_id}}">
            <input type="hidden" name="user_authenticated" value="{{user.is_authenticated}}">
            <input type="hidden" name="type_button" value="cart">
            <input type="hidden" name="actual_value" value="{{cart}}">
            <input type="hidden" name="path" value="{% url 'detail' %}">
            <div>
            {% if cart %}
                <input type="image" src="{% static 'e-shop/img/bolsa_true.png' %}" width="70px" height="70px"><h2>Agregado!</h2>

            {% else %}
                <input type="image" src="{% static 'e-shop/img/bolsa_false.png' %}"width="70px" height="70px"><h2>Agregar a Mi Bolsa</h2>
            {% endif %}
            </div>

                    
        </form>

        <div id="grid-buttons">
            <h3>Me encanta !</h3>

            <form action="{% url 'check_button' %}" method="POST">{%csrf_token%}

                <input type="hidden" name="username" value="{{user.username}}">
                <input type="hidden" name="art_id" value="{{articulo.art_id}}">
                <input type="hidden" name="color_id" value="{{articulo.color_id}}">
                
                <input type="hidden" name="user_authenticated" value="{{user.is_authenticated}}">
                <input type="hidden" name="type_button" value="favorite">
                <input type="hidden" name="actual_value" value="{{favorite}}">
                <input type="hidden" name="path" value="{% url 'detail' %}">

                {% if favorite %}
                    <input type="image" src="{% static 'e-shop/img/favs-true.png' %}" width="60px" height="60px">
                {% else %}
                    <input type="image" src="{% static 'e-shop/img/favs-false.png' %}" width="60px" height="60px">
                {% endif %}

            </form>
            <br>
            <center><a class="boton" href="{% url 'cart' %}" style=>Ir a Mi Bolsa</a></center>
            <br>
            <center><a class="boton" href="{% url 'inicio' %}" style=>Volver</a></center>
        </div>

    </div>


</div>
</div>

{% endblock %}

